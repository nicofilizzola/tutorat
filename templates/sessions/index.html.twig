{% extends 'base.html.twig' %}

{% block title %}Hello SessionController!{% endblock %}

{% block stylesheets %}
	{{ encore_entry_link_tags('app_sessions') }}
	{{ encore_entry_link_tags('app') }}
{% endblock %}

{% block body %}

    <div class="smooth--container" data-lg-smooth>
        <div class="global--container">
            <div class="filter--container">
                <button class="filterButton hoveredItems">
                    Filtres 
                    <svg xmlns="http://www.w3.org/2000/svg" width="12.708" height="6.707" viewBox="0 0 12.708 6.707">
                        <path id="Union_7" data-name="Union 7" d="M14,0,8,6ZM2,0,8,6Z" transform="translate(-1.646 0.354)" fill="none" stroke="#000" stroke-linecap="round" stroke-linejoin="round" stroke-width="1"/>
                    </svg>
                </button>
                <div class="filter--content">
                    <div class="categorie tutors--container">
                        <span>Tuteurs<span>
                        <div class="list">
                            {% for tutor in tutors %}
                                <label for="{{ tutor.id }}" class="hoveredItems">
                                    <input name="{{ tutor.id }}" id="{{ tutor.id }}" data-filter="tutor_{{ tutor.id }}" type="checkbox" hidden>
                                    <div>
                                        <span>{{ tutor.firstname }} {{ tutor.lastname }}</span>
                                    </div>
                                </label>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="categorie subject--container">
                        <span>Modules<span>
                        <div class="list">
                            {% for subject in subjects %}
                                <label for="{{ subject.id }}_{{subject.title }}" class="hoveredItems">
                                    <input name="{{ subject.id }}_{{ subject.title }}" id="{{ subject.id }}_{{ subject.title }}" data-filter="subject_{{ subject.id }}" type="checkbox" hidden>
                                    <div>
                                        <span>{{ subject.title }}</span>
                                    </div>
                                </label>
                            {% endfor %}
                        </div>
                    </div>
                    <div class="categorie semester--container">
                        <span>Semestres<span>
                        <div class="list">
                            <label for="semester_1" class="hoveredItems">
                                <input name="semester_1" id="semester_1" type="checkbox" data-filter="semester_0" hidden>
                                <div>
                                    <span>Semestre 1</span>
                                </div>
                            </label>

                            <label for="semester_2" class="hoveredItems">
                                <input name="semester_2" id="semester_2" type="checkbox" data-filter="semester_1" hidden>
                                <div>
                                    <span>Semestre 2</span>
                                </div>
                            </label>

                            <label for="semester_3" class="hoveredItems">
                                <input name="semester_3" id="semester_3" type="checkbox" data-filter="semester_2" hidden>
                                <div>
                                    <span>Semestre 3</span>
                                </div>
                            </label>

                            <label for="semester_4" class="hoveredItems">
                                <input name="semester_4" id="semester_4" type="checkbox" data-filter="semester_3" hidden>
                                <div>
                                    <span>Semestre 4</span>
                                </div>
                            </label>

                            <label for="semester_5" class="hoveredItems">
                                <input name="semester_5" id="semester_5" type="checkbox" data-filter="semester_4" hidden>
                                <div>
                                    <span>Semestre 5</span>
                                </div>
                            </label>

                            <label for="semester_6" class="hoveredItems">
                                <input name="semester_6" id="semester_6" type="checkbox" data-filter="semester_5" hidden>
                                <div>
                                    <span>Semestre 6</span>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="categorie timeFormat--container">
                        <span>Format<span>
                        <div class="list">
                            <label for="timeFormat_1" class="hoveredItems">
                                <input name="timeFormat_1" id="timeFormat_1" type="checkbox" data-filter="timeFormat_1" hidden>
                                <div>
                                    <span>30min</span>
                                </div>
                            </label>

                            <label for="timeFormat_2" class="hoveredItems">
                                <input name="timeFormat_2" id="timeFormat_2" type="checkbox" data-filter="timeFormat_2" hidden>
                                <div>
                                    <span>45min</span>
                                </div>
                            </label>

                            <label for="timeFormat_3" class="hoveredItems">
                                <input name="timeFormat_3" id="timeFormat_3" type="checkbox" data-filter="timeFormat_3" hidden>
                                <div>
                                    <span>1h</span>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="categorie environnement--container">
                        <span>Environnement<span>
                        <div class="list">
                            <label for="presentiel" class="hoveredItems">
                                <input name="presentiel" id="presentiel" type="checkbox" data-filter="environnement_1" hidden>
                                <div>
                                    <span>Présentiel</span>
                                </div>
                            </label>
                            <label for="distanciel" class="hoveredItems">
                                <input name="distanciel" id="distanciel" type="checkbox" data-filter="environnement_2" hidden>
                                <div>
                                    <span>Distanciel</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>

            <div class="session--container">
                {% for session in sessions %}
                    <div class="card--container tutor_{{ session.tutor.id }} subject_{{ session.subject.id }} semester_{{ session.subject.semester }} timeFormat_{{ session.timeFormat }} environnement_{{ session.faceToFace }}" data-tutor="tutor_{{ session.tutor.id }}" data-subject="subject_{{ session.subject.id }}" data-semester="semester_{{ session.subject.semester }}" data-timeFormat="timeFormat_{{ session.timeFormat }}" data-environnement="environnement_{{ session.faceToFace }}">
                        <button class="inscription hoveredItems" onclick="event.preventDefault(); document.querySelector('#js-session-view-{{ session.id }}').submit();">
                            <div class="card--hovered">
                                <div class="text">
                                    <div>
                                        <span>E</span>
                                        <span>N</span>
                                        <span> </span>
                                        <span>S</span>
                                        <span>A</span>
                                        <span>V</span>
                                        <span>O</span>
                                        <span>I</span>
                                        <span>R</span>
                                        <span> </span>
                                        <span>P</span>
                                        <span>L</span>
                                        <span>U</span>
                                        <span>S</span>
                                    </div>
                                </div>
                                <div class="background">
                                </div>
                            </div>
                            <div class="card">
                                <div class="card--content">
                                    <div class="text">
                                        <span class="title">{{ session.title }}</span>
                                        <br>
                                        <span class="subject">{{ session.subject.title }}</span>
                                    </div>
                                    <div class="text">
                                        <span>Par </span><span class="name">{{ session.tutor.firstName | capitalize ~ " " ~ session.tutor.lastName | capitalize }}</span>
                                        <br>
                                        <span>Le <b>{{ session.datetime | date('d/m/Y') }}</b> à <b>{{ session.datetime | date('h') }}h{{ session.datetime | date('i') }}</b> en <b>{{ (session.faceToFace == 1) ? "présentiel" : "distanciel" }}</b></span>
                                        <br>
                                        {% set duration = "30min" %}
                                        {% if session.timeFormat == 2 %}
                                            {% set duration = "45min" %}
                                        {% elseif session.timeFormat == 3 %}
                                            {% set duration = "1h" %}
                                        {% endif %}
                                        <span>Durée : <b>{{ duration }}</b></span>
                                    </div>
                                </div>
                                <div class="card--participants">
                                    {% set participantsLength = session.students | length %}
                                    {% if participantsLength == 0 %}
                                        {% set participantsMessage = "NOUVEAU" %}
                                    {% else %}
                                        {% set participantsMessage = participantsLength ~ "/" ~ session.studentLimit ~ " participant.es" %}
                                    {% endif %}
                                    <span>{{ participantsMessage }}</span>
                                </div>
                            </div>
                        </button>
                        <form 
                            id="js-session-view-{{ session.id }}"
                            action="{{ path('app_sessions_view', {"id": session.id}) }}" 
                            method="GET"
                            display="none">
                        </form>
                    </div>
                {% endfor %}
            </div>

            {% include "components/_footer.html.twig" %}
        </div>
    </div>


{% endblock %}
