{% extends 'base.html.twig' %}

{% block title %}Hello AdminController!{% endblock %}

{% block stylesheets %}
    {{ encore_entry_link_tags('app_users') }}
    {{ encore_entry_link_tags('app') }}
{% endblock %}

{% block body %}

    <div class="container" data-lg-smooth>
        <div class="content--container" data-lg-reveal="fade" data-lg-reveal-stagger="0.1">
            {% if users is empty == false %}
                {% for user in users %}
                    <div class="card--container">
                        <div class="card" data-id={{user.id}}>
                            <div class="card--content">
                                <div class="name">
                                    <span>{{ user.firstName | upper }}</span>
                                    <span>{{ user.lastName | capitalize }}</span>
                                </div>
                                <span id="mail">{{ user.email | lower }}</span>
                                <span>{{ user.roles[user.roles | length - 2] }}</span>
                            </div>
                            <div class="card--buttons">
                                <button class="hoveredItems validate"><span>✔️</span></button>
                                <button class="hoveredItems refuse"><span>❌</span></button>
                            </div>
                        </div>
                    </div>


                    <form 
                        id="js-user-validate-form-{{ user.id }}"
                        display="none" 
                        hidden
                        action="{{ path('app_user_validate', {"id": user.id}) }}" 
                        method="POST">
                        <input type="hidden" name="token" value="{{ csrf_token('validate-user' ~ user.id) }}"/>
                        {# <input type="hidden" name="_method" value="PUT"/> #}
                    </form>
                    <form 
                        id="js-user-cancel-form-{{ user.id }}"
                        display="none" 
                        hidden
                        action="{{ path('app_user_cancel', {"id": user.id}) }}" 
                        method="POST">
                        <input type="hidden" name="token" value="{{ csrf_token('cancel-user' ~ user.id) }}"/>
                        {# <input type="hidden" name="_method" value="PUT"/> #}
                    </form>
                {% endfor %}

            {% else %}
                <h2>Pas d'utilisateurs à valider</h2>
            {% endif %}
        </div>
    </div>

{% endblock %}
