{% extends 'base.html.twig' %}

{% block title %}Hello DefaultController!{% endblock %}

{% block stylesheets %}
	{{ encore_entry_link_tags('app_home') }}
	{{ encore_entry_link_tags('app') }}
{% endblock %}

{% block body %}
    {% if app.user %}
        <div class="smooth--container" data-lg-smooth>
            <div class="welcome--container">
            
                {% if "ROLE_ADMIN" not in app.user.roles %}
                    <div class="leftSide">
                        <div class="home--container">
                            <div class="welcome">
                                <h1>Bonjour <span>{{ app.user.firstname }}</span> üëã</h1>
                                <span><b>Heureux de te revoir !</b></span>
                            </div>

                            {% if sessions | length == 0 %}
                                <span>Tu n'as pas de cours pr√©vu. N'h√©sites pas en chercher <a href="{{ path('app_sessions') }}" class="hoveredItems lineHoverEffect"><span>ici</span></a> !</span>
                            {% else %}
                                <span>Tu es inscrit.e √† <span><b>{{ sessions | length}}</b></span> cours ! Tu peux voir la liste √† c√¥t√© üëÄ</span>                             
                            {% endif %}
                            <div class="buttons">
                                <div class="sessionsChoice--container">
                                    <a href="{{ path('app_sessions') }}"><button class="btn btn__tinyEffect hoveredItems">Chercher un cours</button></a>
                                    {# <span><b>ou</b></span> #}
                                    {% if ("ROLE_TUTOR" in app.user.roles) and (app.user.isValid == 2) %}
                                        <a href="{{ path('app_sessions_create') }}"><button class="btn btn__tinyEffect hoveredItems">Proposer un cours</button></a>
                                    {% else %}
                                        <button class="btn btn__tinyEffect hoveredItems" id="becomeTutor">Proposer un cours</button>
                                    {% endif %}
                                </div>
                                <a href="{{ path('app_logout') }}"><button class="btn btn__tinyEffect btn__tiny hoveredItems">Se d√©connecter</button></a>
                            </div>
                        </div>
                        
                    </div>

                    <div class="rightSide">
                        <div class="sessions--container">
                            {% for session in sessions %}
                                <div class="studentCourse">
                                    <div class="link hoveredItems">
                                        <a href="{{ path('app_sessions_view', {"id": session.id}) }}"><span>{{ session.date_time | date('d/m/Y') }} - {{ session.date_time | date('h') }}:{{ session.date_time | date('i') }}</span></a>
                                        <svg xmlns="http://www.w3.org/2000/svg" width="18.03" height="16.857" viewBox="0 0 18.03 16.857">
                                            <g id="back_arrow" data-name="back arrow" transform="translate(17.064 10.025) rotate(150)">
                                                <line id="Ligne_6" data-name="Ligne 6" x2="13.664" transform="translate(0 5.23)" fill="none" stroke="#707070" stroke-linecap="round" stroke-width="1"/>
                                                <line id="Ligne_7" data-name="Ligne 7" y1="5.23" x2="5.23" fill="none" stroke="#707070" stroke-linecap="round" stroke-width="1"/>
                                                <line id="Ligne_8" data-name="Ligne 8" x2="5.23" y2="5.23" transform="translate(0 5.23)" fill="none" stroke="#707070" stroke-linecap="round" stroke-width="1"/>
                                            </g>
                                        </svg>
                                    </div>
                                    <div class="lineGap"></div>
                                    <div class="infos">
                                        <span>{{ session.subject_id }} - Semestre - {{ (session.face_to_face == 1) ? "Pr√©sentiel" : "Distanciel" }}</span>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>

                {% elseif ("ROLE_TUTOR" in app.user.roles) and (app.user.isValid == 2) %}
                    
                {% endif %}
                

                {{dump(sessions)}}

                {# <a href="{{ path('app_logout') }}"><button class="btn btn__tinyEffect btn__tiny hoveredItems">Se d√©connecter</button></a> #}

                
                {# {% if "ROLE_TUTOR" not in app.user.roles %}
                    <a href="{{ path('app_become-tutor') }}">Devenir tuteur</a><br>
                {% endif %}
                {% if ("ROLE_TUTOR" in app.user.roles) and (app.user.isValid == 2) %}
                    <a href="{{ path('app_sessions_create') }}">Proposer un cours</a><br>
                {% endif %}
                {% if ("ROLE_SECRETARY" in app.user.roles) and (app.user.isValid == 2) %}
                    <a href="{{ path('app_sessions_pending') }}">Demandes de salle de cours</a><br>
                {% endif %}
                {% if ("ROLE_ADMIN" in app.user.roles) and (app.user.isValid == 2) %}
                    <a href="{{ path('app_users') }}">G√©rer les utilisateurs</a><br>
                    <a href="{{ path('app_subject') }}">G√©rer les mati√®res</a><br>
                    <a href="{{ path('app_sessions_log') }}">Log</a><br>
                {% endif %}

            {% else %}
                <a href="{{ path('app_register') }}">Inscription</a><br>
                <a href="{{ path('app_login') }}">Se co</a><br>
            {% endif %}

            {# if a student wanna become a tutor #}
            {% if "ROLE_TUTOR" not in app.user.roles%}
                <div class="flash--container">
                    <div class="text--container">
                        <span>Si tu veux proposer un cours il faut que tu sois tuteur.</span>
                        <br>
                        <a href="{{ path('app_become-tutor') }}" style="color:#fff" class="hoveredItems lineHoverEffect"><span>Clique ici pour faire la demande.</span></a>
                        <span class="cross">&times;</span>
                    </div>
                    <div class="background">
                    </div>
                </div>
            {% endif %}
        </div>
    </div>

    {# {{ dump(sessions) }} #}

{% endblock %}
